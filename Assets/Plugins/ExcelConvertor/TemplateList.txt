using System;
using System.Collections.Generic;
using System.IO;

public class {ClassName}Reader
{
	public static {ClassName} Lookup(Predicate<{ClassName}> condition)
	{
		if (null == m_data && !Load())
		{
			return null;
		}
		return m_data.Find(condition);
	}
	public static List<{ClassName}> LookupAll(Predicate<{ClassName}> condition)
	{
		if (null == m_data && !Load())
		{
			return null;
		}
		return m_data.FindAll(condition);
	}
	public static bool Load()
	{
		byte[] bytes = TableBytesLoader.Load("{ClassName}");
		if (null == bytes)
		{
			return false;
		}
		using (MemoryStream stream = new MemoryStream(bytes))
		{
			using (BinaryReader reader = new BinaryReader(stream))
			{
				m_data = new List<{ClassName}>();
				int dataCount = reader.ReadInt32();
				for (int index = 0; index < dataCount; ++index)
				{
					{ClassName} tableData = new {ClassName}();
					{
						{ReadObject}
					}
					m_data.Add(tableData);
				}
			}
		}
		return true;
	}
	private static List<{ClassName}> m_data = null;
}
